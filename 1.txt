#include<stdafx.h>
#include<stdio.h>
#include<glut.h>
int x1, y1, x2, y2, x, y;
void draw_point(int x, int y)
{
glColor3f(1.0,0.0,0.0);
glBegin(GL_POINTS);
glVertex2i(x,y);
glEnd();
}
void bresenhams(int x1, int y1, int x2, int y2)
{
float dx, dy, m, dp;
dx = x2 - x1;
dy = y2 - y1;
m = dy/dx;
if(m < 1)
{
dp = 2*dy - dx;
x = x1; 
y = y1;
if(dx < 0) 
{
x = x2;
y = y2;
 x2 = x1;
}
draw_point(x, y);
while(x < x2)
{
if(dp >= 0)
{
x = x+1;
y = y+1;
dp =dp + 2*dy - 2*dx * (y+1 - y);
}
else
{
x = x+1;
y = y;
dp = dp + 2*dy - 2*dx * (y- y);
}
draw_point(x, y);
}
}
else if(m > 1)
{
int dp = 2*dx - dy;
int x = x1;
int y = y1; 
if(dy < 0)
{
x = x2;
y = y2;
y2 = y1;
}
draw_point(x, y);
while(y < y2)
{
if(dp >= 0)
{
x = x+1;
y = y+1;
dp = dp + 2*dx - 2*dy * (x+1 - x);
}
else
{
y = y+1;
x = x;
dp = dp + 2*dx - 2*dy * (x- x);
}
draw_point(x, y);
}
}
else if (m == 1)
{
int x = x1;
int y = y1;
draw_point(x, y);
while(x < x2)
{
x = x+1;
y = y+1;
draw_point(x, y);
}
}
}
void reshape()
{
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glClearColor(1,1,1,1);
gluOrtho2D(0.0, 500.0, 0.0, 500.0); 
}
void display()
{
glClear(GL_COLOR_BUFFER_BIT);
bresenhams(x1, y1, x2, y2);
glFlush();
}
int main(int argc, char **argv)
{
printf( "Enter Start Points (x1,y1)\n");
scanf("%d %d", &x1, &y1); 
printf( "Enter End Points (x2,y2)\n");
scanf("%d %d", &x2, &y2);
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_SINGLE|GLUT_RGB); 
glutInitWindowSize(500, 500); 
glutInitWindowPosition(220, 200); 
glutCreateWindow("Bresenham's Line Drawing"); 
reshape(); 
glutDisplayFunc(display); 
glutMainLoop();
}
